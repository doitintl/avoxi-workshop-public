import {
  __async
} from "../chunk-WFI2LP4G.mjs";
function upsertDatapoints(params) {
  return __async(this, null, function* () {
    const { datapoints, authClient, projectId, location, indexId } = params;
    const accessToken = yield authClient.getAccessToken();
    const url = `https://${location}-aiplatform.googleapis.com/v1/projects/${projectId}/locations/${location}/indexes/${indexId}:upsertDatapoints`;
    const requestBody = {
      datapoints: datapoints.map((dp) => ({
        datapoint_id: dp.datapointId,
        feature_vector: dp.featureVector
      }))
    };
    const response = yield fetch(url, {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        Authorization: `Bearer ${accessToken}`
      },
      body: JSON.stringify(requestBody)
    });
    if (!response.ok) {
      throw new Error(
        `Error upserting datapoints into index ${indexId}: ${response.statusText}`
      );
    }
  });
}
export {
  upsertDatapoints
};
//# sourceMappingURL=upsert_datapoints.mjs.map